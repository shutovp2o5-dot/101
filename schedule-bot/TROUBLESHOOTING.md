# Решение проблем с ботом

## Проблема: Conflict - terminated by other getUpdates request

Эта ошибка возникает, когда Telegram API считает, что уже есть активное соединение с ботом.

### Быстрое решение:

1. **Остановите все процессы бота:**
   ```bash
   pkill -f "bot.py"
   ```

2. **Очистите webhook и pending updates:**
   ```bash
   python3 reset_bot.py
   ```

3. **Подождите 1-2 минуты** (чтобы Telegram API освободил соединение)

4. **Запустите бота заново:**
   ```bash
   python3 bot.py
   ```
   или
   ```bash
   ./start.sh
   ```

### Если проблема сохраняется:

1. **Проверьте, не запущен ли бот где-то еще:**
   - В другом терминале
   - На другом компьютере
   - Через systemd/launchd/screen/tmux
   - Через веб-интерфейс или другой сервис

2. **Проверьте активные процессы:**
   ```bash
   pgrep -f "bot.py"
   ps aux | grep bot.py
   ```

3. **Проверьте screen/tmux сессии:**
   ```bash
   screen -ls
   tmux ls
   ```

4. **Принудительная очистка:**
   ```bash
   python3 reset_bot.py
   pkill -9 -f "bot.py"
   sleep 60  # Подождите минуту
   python3 bot.py
   ```

### Автоматическое восстановление

Бот теперь автоматически пытается восстановиться при ошибке Conflict (до 3 попыток с увеличивающимися задержками).

### Дополнительная информация

- Бот использует polling для получения обновлений
- Telegram API не позволяет нескольким экземплярам одного бота работать одновременно
- После остановки бота может потребоваться время для освобождения соединения на стороне Telegram
